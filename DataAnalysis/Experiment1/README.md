# Experiment 1: Probe Detection Task by Respiratory Phase

**Project:** The Influence of Respiratory Cycles on Visuo-Spatial Attention
**Date:** 21-05-2025
**Version:** v1

---

## Overview

Experiment 1 employed a probe-detection paradigm to examine how breathing phase (inhale vs. exhale) influences response times across vertical (up/down) and horizontal (left/right) spatial dimensions.

---

## Directory Structure for Experiment 1

```
TheInfluenceOfRespiratoryCyclesOnVisuoSpatialAttention_v1_21-05-2025/
└── Experiment1/
    ├── data/
    │   ├── raw/         ← unmodified PsychoPy CSV exports
    │   ├── processed/   ← cleaned, analysis-ready CSVs
    │   └── merged/      ← merged data & descriptives
    │       ├── merged_data.csv
    │       └── cell_desc.csv
    ├── scripts/        ← all R & Python scripts
    │   ├── exp1_data_clean.R    ← batch cleaning of all raw CSVs
    │   ├── exp1_data_merge.R    ← merges cleaned CSVs into one
    │   ├── exp1_analysis.R      ← full filtering, descriptives, ANOVAs & exports tables
    │   └── plots.py             ← reads cell_desc.csv & generates figures
    ├── results/
    │   ├── figures/
    │   │   ├── exp1_left_right.png
    │   │   └── exp1_up_down.png
    │   └── tables/    ← exported ANOVA & contrast CSVs
    │       ├── 01_LR_anova.csv
    │       ├── 02_LR_simpleEffect_Position_by_Phase.csv
    │       ├── 03_LR_simpleEffect_Phase_by_Position.csv
    │       ├── 04_LR_interactionContrasts.csv
    │       ├── 05_UD_anova.csv
    │       ├── 06_UD_simpleEffect_Position_by_Phase.csv
    │       ├── 07_UD_simpleEffect_Phase_by_Position.csv
    │       └── 08_UD_interactionContrasts.csv
    └── README.md      ← this file
```

---

## Data

### Raw files (`data/raw/`)

* **Contents:** Unmodified PsychoPy CSV exports (practice trials, timestamps, metadata).
* **Preparation:** Rename each export to `P<participantID>.csv` and place in `data/raw/`.

### Cleaned files (`data/processed/`)

Generated by `exp1_data_clean.R` in one batch—no need to run per file. Processes every `P*.csv` in `data/raw/` and outputs cleaned CSVs with columns:

```
participant_ID │ position │ trial │ phase │ response │ rt
```

* **Filenames:** `P<participantID>_experiment_1_clean.csv`

### Merged data & Descriptives (`data/merged/`)

1. **Merged dataset**: `merged_data.csv` (via `exp1_data_merge.R`)
2. **Cell-level descriptives**: `cell_desc.csv` (weighted means, SEs, 95% CIs by Position × Phase via `exp1_analysis.R`)

---

## Scripts

1. **exp1\_data\_clean.R**
   Batch-cleans all raw files in `data/raw/` and writes cleaned CSVs to `data/processed/`.

   ```bash
   Rscript scripts/exp1_data_clean.R data/raw/ data/processed/
   ```

2. **exp1\_data\_merge.R**
   Concatenates all cleaned CSVs into `data/merged/merged_data.csv`.

   ```bash
   Rscript scripts/exp1_data_merge.R data/processed/ data/merged/
   ```

3. **exp1\_analysis.R**

   * Trial-level filtering (remove catches & incorrect)
   * Participant exclusion (≥30% incorrect)
   * Winsorising RTs (±2 SD)
   * Descriptive stats → `cell_desc.csv`
   * Two 2×2 repeated-measures ANOVAs (Left/Right × Phase; Up/Down × Phase)
   * Bonferroni-adjusted pairwise comparisons
   * **Exports** all omnibus ANOVA tables & post-hoc contrasts as CSVs into `results/tables/`

   ```bash
   Rscript scripts/exp1_analysis.R data/merged/ data/merged/cell_desc.csv
   ```

4. **plots.py**
   Reads `data/merged/cell_desc.csv`, converts RTs to ms, and creates bar plots for left/right and up/down → saves PNGs in `results/figures/`.

   ```bash
   python scripts/plots.py data/merged/cell_desc.csv results/figures/
   ```

---

## Usage Workflow

1. **Install dependencies**

   ```bash
   # R packages
   Rscript -e "install.packages(c('dplyr','readr','afex','emmeans'))"
   # Python packages
   pip install pandas matplotlib
   ```

2. **Prepare raw data**
   Rename all PsychoPy exports to `P<participantID>.csv` and place in `data/raw/`.

3. **Clean raw data**

   ```bash
   Rscript scripts/exp1_data_clean.R data/raw/ data/processed/
   ```

4. **Merge cleaned files**

   ```bash
   Rscript scripts/exp1_data_merge.R data/processed/ data/merged/
   ```

5. **Run analysis**

   ```bash
   Rscript scripts/exp1_analysis.R data/merged/ data/merged/cell_desc.csv
   ```

6. **Generate plots**

   ```bash
   python scripts/plots.py data/merged/cell_desc.csv results/figures/
   ```

---

For questions or issues, please contact the project maintainer.
